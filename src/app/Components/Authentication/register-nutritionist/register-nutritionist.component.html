<div class="register-container">
    <div class="header">
      <h2>Registro de Nutricionista</h2>
      <button class="return-button" (click)="onReturn()">Regresar</button>
    </div>
    
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <mat-form-field>
            <input matInput placeholder="ID (Cédula)" formControlName="id" required>
            <mat-error *ngIf="registerForm.get('id')?.hasError('required')">Este campo es obligatorio</mat-error>
            <mat-error *ngIf="registerForm.get('id')?.hasError('pattern')">Solo se permiten números</mat-error>
        </mat-form-field>
  
        <mat-form-field>
            <input matInput placeholder="Edad" formControlName="age" type="number" required>
            <mat-error *ngIf="registerForm.get('age')?.hasError('required')">Este campo es obligatorio</mat-error>
            <mat-error *ngIf="registerForm.get('age')?.hasError('min')">La edad debe ser mayor a 0</mat-error>
        </mat-form-field>
  
        <mat-form-field>
            <input matInput placeholder="Contraseña" formControlName="password" type="password" required>
            <mat-error *ngIf="registerForm.get('password')?.hasError('required')">Este campo es obligatorio</mat-error>
            <mat-error *ngIf="registerForm.get('password')?.hasError('minlength')">La contraseña debe tener al menos 6 caracteres</mat-error>
        </mat-form-field>
  
        <mat-form-field>
            <input matInput placeholder="Confirmar Contraseña" formControlName="confirmPassword" type="password" required>
            <mat-error *ngIf="registerForm.get('confirmPassword')?.hasError('required')">Este campo es obligatorio</mat-error>
            <mat-error *ngIf="registerForm.hasError('passwordMismatch')">Las contraseñas no coinciden</mat-error>
        </mat-form-field>
  
        <mat-form-field>
            <input matInput [matDatepicker]="picker" placeholder="Fecha de nacimiento" formControlName="birthdate" required>
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
            <mat-error *ngIf="registerForm.get('birthdate')?.hasError('required')">Este campo es obligatorio</mat-error>
        </mat-form-field>
  
        <mat-form-field class="full-width">
            <input matInput placeholder="Email" formControlName="email" type="email" required>
            <mat-error *ngIf="registerForm.get('email')?.hasError('required')">Este campo es obligatorio</mat-error>
            <mat-error *ngIf="registerForm.get('email')?.hasError('email')">Email inválido</mat-error>
        </mat-form-field>
  
        <div formGroupName="fullname" class="full-width form-group">
            <mat-form-field>
                <input matInput placeholder="Nombre" formControlName="name" required>
                <mat-error *ngIf="registerForm.get('fullname.name')?.hasError('required')">Este campo es obligatorio</mat-error>
            </mat-form-field>

            <mat-form-field>
                <input matInput placeholder="Primer apellido" formControlName="firstlastName" required>
                <mat-error *ngIf="registerForm.get('fullname.firstlastName')?.hasError('required')">Este campo es obligatorio</mat-error>
            </mat-form-field>

            <mat-form-field>
                <input matInput placeholder="Segundo apellido" formControlName="secondlastName" required>
                <mat-error *ngIf="registerForm.get('fullname.secondlastName')?.hasError('required')">Este campo es obligatorio</mat-error>
            </mat-form-field>
        </div>

        <mat-form-field>
            <input matInput placeholder="Nombre de usuario" formControlName="username" required>
            <mat-error *ngIf="registerForm.get('username')?.hasError('required')">Este campo es obligatorio</mat-error>
        </mat-form-field>

        <mat-form-field>
            <input matInput placeholder="Peso (kg)" formControlName="weight" type="number" required>
            <mat-error *ngIf="registerForm.get('weight')?.hasError('required')">Este campo es obligatorio</mat-error>
            <mat-error *ngIf="registerForm.get('weight')?.hasError('min')">El peso debe ser mayor o igual a 0</mat-error>
        </mat-form-field>

        <mat-form-field>
            <input matInput placeholder="IMC (Índice de Masa Corporal)" formControlName="imc" type="number" required>
            <mat-error *ngIf="registerForm.get('imc')?.hasError('required')">Este campo es obligatorio</mat-error>
            <mat-error *ngIf="registerForm.get('imc')?.hasError('min')">El IMC debe ser mayor a 0</mat-error>
        </mat-form-field>

        <div formGroupName="address" class="full-width form-group">
            <mat-form-field>
                <input matInput placeholder="Provincia" formControlName="a_province" required>
                <mat-error *ngIf="registerForm.get('address.a_province')?.hasError('required')">Este campo es obligatorio</mat-error>
            </mat-form-field>

            <mat-form-field>
                <input matInput placeholder="Cantón" formControlName="a_canton" required>
                <mat-error *ngIf="registerForm.get('address.a_canton')?.hasError('required')">Este campo es obligatorio</mat-error>
            </mat-form-field>

            <mat-form-field>
                <input matInput placeholder="Distrito" formControlName="a_district" required>
                <mat-error *ngIf="registerForm.get('address.a_district')?.hasError('required')">Este campo es obligatorio</mat-error>
            </mat-form-field>
        </div>

        <mat-form-field>
            <input matInput placeholder="Foto (URL)" formControlName="photo" required>
            <mat-error *ngIf="registerForm.get('photo')?.hasError('required')">Este campo es obligatorio</mat-error>
        </mat-form-field>

        <div formGroupName="paymentCard" class="full-width form-group">
            <mat-form-field>
              <input matInput placeholder="Nombre en la tarjeta" formControlName="pc_name" required>
              <mat-error *ngIf="registerForm.get('paymentCard.pc_name')?.hasError('required')">Este campo es obligatorio</mat-error>
            </mat-form-field>
      
            <mat-form-field>
              <input matInput placeholder="Número de tarjeta" formControlName="pc_number" required>
              <mat-error *ngIf="registerForm.get('paymentCard.pc_number')?.hasError('required')">Este campo es obligatorio</mat-error>
              <mat-error *ngIf="registerForm.get('paymentCard.pc_number')?.hasError('pattern')">Número de tarjeta inválido</mat-error>
            </mat-form-field>
      
            <mat-form-field>
              <input matInput placeholder="CVC" formControlName="pc_cvc" type="number" required>
              <mat-error *ngIf="registerForm.get('paymentCard.pc_cvc')?.hasError('required')">Este campo es obligatorio</mat-error>
              <mat-error *ngIf="registerForm.get('paymentCard.pc_cvc')?.hasError('pattern')">CVC inválido</mat-error>
            </mat-form-field>
      
            <div formGroupName="pc_expirationDate" class="full-width form-group">
              <mat-form-field>
                <input matInput placeholder="Mes de expiración" formControlName="pc_ed_month" type="number" required>
                <mat-error *ngIf="registerForm.get('paymentCard.pc_expirationDate.pc_ed_month')?.hasError('required')">Este campo es obligatorio</mat-error>
                <mat-error *ngIf="registerForm.get('paymentCard.pc_expirationDate.pc_ed_month')?.hasError('min') || registerForm.get('paymentCard.pc_expirationDate.pc_ed_month')?.hasError('max')">Mes inválido</mat-error>
              </mat-form-field>
      
              <mat-form-field>
                <input matInput placeholder="Año de expiración" formControlName="pc_ed_year" type="number" required>
                <mat-error *ngIf="registerForm.get('paymentCard.pc_expirationDate.pc_ed_year')?.hasError('required')">Este campo es obligatorio</mat-error>
                <mat-error *ngIf="registerForm.get('paymentCard.pc_expirationDate.pc_ed_year')?.hasError('min')">Año inválido</mat-error>
              </mat-form-field>
            </div>
        </div>

        <mat-form-field>
            <mat-label>Tipo de pago</mat-label>
            <mat-select formControlName="paymentType" required>
              <mat-option *ngFor="let type of paymentTypes" [value]="type">
                {{type}}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="registerForm.get('paymentType')?.hasError('required')">Este campo es obligatorio</mat-error>
        </mat-form-field>
      
        <mat-form-field>
            <input matInput placeholder="Código de nutricionista" formControlName="code" type="number" required>
            <mat-error *ngIf="registerForm.get('code')?.hasError('required')">Este campo es obligatorio</mat-error>
            <mat-error *ngIf="registerForm.get('code')?.hasError('pattern')">Código inválido</mat-error>
        </mat-form-field>

        <div class="button-container">
            <button mat-raised-button color="primary" type="submit">Registrar</button>
        </div>
    </form>
</div>